<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Demo</title>
	<style type="text/css">
		#code {
			height: 300px;
		}
		#anime-canvas {
			height: 300px;
			width: 400px;
		}
		#draw-button {
			margin-top: 145px;
		}
		div {
			float: left;
		}
		.border {
			border: 1px solid;
			border-color: rgb(169, 169, 169);
		}
	</style>
	<script type="text/javascript" src="jquery.min.js"></script>
	<script type="text/javascript" src="Flash It.js"></script>
	<script type="text/javascript" src="built-in functions.js"></script>
	<script type="text/javascript">
	x = flashit();


	$(document).ready(function(){
		$("#full-speed-button").click(function(){
			var counts = 0;
			var code = $("#code").val();
			var ctx = document.getElementById('anime-canvas').getContext('2d');
			var frameEnd = false;
			x.init(code,[stdlib(ctx,{
				width:400,
				height:300
			},function(){
				frameEnd = true;
			})]);
			goes = function(){
				if(!x.hasNext()){
					console.log("finished after "+counts+" times caculate");
				}else{
					if(frameEnd){
						frameEnd = false;
					}else{
						x.next();
						counts += 1;
					}
					setTimeout(goes,0);
				}
			}
			goes();
		})
	})
	</script>
</head>
<body>
	<h1>Demo</h1>
	<div>
		<textarea id="code" cols="50"></textarea>
	</div>
	<div>
		<button id="full-speed-button">Full Speed</button>
		<button id="by-frame-button">By Frame</button>
		<button id="by-step-button">By Step</button>
	</div>
	<div class="border">
		<canvas id="anime-canvas"></canvas>
	</div>
</body>
</html>